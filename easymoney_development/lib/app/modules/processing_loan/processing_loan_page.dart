import 'dart:io';import 'package:easy_money/app/core/constants/colors.dart';import 'package:easy_money/app/core/constants/constants.dart';import 'package:easy_money/app/core/widgets/custom_back_app_bar.dart';import 'package:easy_money/app/core/widgets/custom_button.dart';import 'package:easy_money/app/core/widgets/custom_selection.dart';import 'package:easy_money/app/core/widgets/custom_text_field.dart';import 'package:easy_money/app/core/widgets/custom_label_text.dart';import 'package:easy_money/app/core/widgets/widgets.dart';import 'package:flutter_feather_icons/flutter_feather_icons.dart';import 'package:image_picker/image_picker.dart';import 'processing_loan.dart';import 'package:flutter/material.dart';import 'package:get/get.dart';class ProcessingLoanPage extends GetView<ProcessingLoanController> {  const ProcessingLoanPage({Key? key}) : super(key: key);  @override  Widget build(BuildContext context) {    List<Widget> listForm = [      Column(        crossAxisAlignment: CrossAxisAlignment.start,        children: [          const CustomLabelText(              title: "Personal Information",              description: "Please, fill in your personal info below."),          const SizedBox(            height: 36,          ),          CustomTextField(            label: "Income",            hintText: "How much do earn per month?",            controller: controller.moneyIncome,            keyboardType: TextInputType.number,          ),          const SizedBox(            height: 20,          ),          Obx(() {            return CustomSelection(              onChanged: (value) {                controller.homeOwnerShipSelect.value = value;              },              selectionList: controller.homeOwnerShipList,              selected: controller.homeOwnerShipSelect.value,              label: "House Ownership",            );          }),          const SizedBox(            height: 20,          ),          Obx(() {            return CustomSelection(              onChanged: (value) {                controller.propertyAreaSelect.value = value;              },              selectionList: controller.propertyAreaList,              selected: controller.propertyAreaSelect.value,              label: "Property Area",            );          }),          const SizedBox(            height: 20,          ),          CustomTextField(            label: "Number of Experiences",            hintText: "How many years?",            controller: controller.numberOfExperiences,            keyboardType: TextInputType.number,          ),        ],      ),      Column(        crossAxisAlignment: CrossAxisAlignment.start,        children: [          const CustomLabelText(            title: "Loan Information",            description: "Tell us your purpose for this request.",          ),          const SizedBox(            height: 20,          ),          // CustomTextField(          //   label: "Amount",          //   hintText: "How much?",          //   controller: controller.loanAmount,          //   keyboardType: TextInputType.number,          // ),          const SizedBox(            height: 20,          ),          CustomTextField(            label: "Term",            hintText: "How long in month?",            controller: controller.term,            keyboardType: TextInputType.number,          ),          const SizedBox(            height: 20,          ),          CustomTextField(            label: "Monthly Installment",            hintText: "How much in a month?",            controller: controller.installmentAmount,            keyboardType: TextInputType.number,          ),          const SizedBox(            height: 20,          ),        ],      ),      Column(        crossAxisAlignment: CrossAxisAlignment.start,        children: [          //Upload Text Title          const CustomPageContent(            title: "Upload",            description:            "your proof document image here. It can be a Bank Statement, proof of income or salary.",          ),          const SizedBox(            height: 30,          ),          //Image Upload area          GestureDetector(            onTap: () => _buildOptionSelection,            child: Obx(() {              return Container(                height: getWidth * 1.10,                decoration: BoxDecoration(                  borderRadius: BorderRadius.circular(20),                  color: ColorConstants.lightGreyColor,                  image: DecorationImage(                    image: FileImage(File(controller.selectedImagePath.value)),                    fit: BoxFit.cover,                  ),                ),                child: Center(                  child: controller.selectedImagePath.value == ""                      ? const Icon(                    FeatherIcons.image,                    size: 40,                  )                      : null,                ),              );            }),          ),        ],      ),    ];    return Obx(() {      return ScaffoldWithLoading(          isLoading: controller.isRequesting.value,          scaffold: Scaffold(            appBar: customBackAppBar(              title: 'Request Loan',              // elevation: 0,            ),            body: SingleChildScrollView(              child: InkWell(                onTap: Platform.isIOS                    ? () {                  FocusScope.of(context).requestFocus(FocusNode());                }                    : null,                child: Obx(() {                  return Container(                    padding: const EdgeInsets.symmetric(                      vertical: 35,                      horizontal: 27,                    ),                    child: listForm[controller.formIndex.value],                  );                }),              ),            ),            bottomNavigationBar: Padding(              padding: const EdgeInsets.fromLTRB(27, 10, 27, 20),              child: Obx(() {                return CustomButton(                  name: controller.formIndex.value == 2                      ? "Request Now"                      : "Next",                  onTap: () => controller.onTapButton(),                );              }),            ),          ));    });  }  get _buildOptionSelection {    return Get.bottomSheet(      Container(        height: 260,        decoration: const BoxDecoration(          color: ColorConstants.whiteColor,          borderRadius: BorderRadius.only(            topRight: Radius.circular(20),            topLeft: Radius.circular(20),          ),        ),        child: Column(          // crossAxisAlignment: CrossAxisAlignment.start,          children: [            //Slide bar indicator            Container(              margin: const EdgeInsets.only(top: 5),              width: 50,              height: 3,              decoration: BoxDecoration(                borderRadius: BorderRadius.circular(3),                color: ColorConstants.greyPramiryColor,              ),            ),            //Option List            Container(              padding: const EdgeInsets.symmetric(horizontal: 27, vertical: 30),              child: Column(                crossAxisAlignment: CrossAxisAlignment.start,                children: [                  //Open Camera Option                  GestureDetector(                    onTap: () => controller.getImage(ImageSource.camera),                    child: Row(                      children: [                        //Option Icon                        Container(                          width: 50,                          height: 50,                          decoration: const BoxDecoration(                            color: ColorConstants.lightGreyColor,                            shape: BoxShape.circle,                          ),                          child: const Center(                            child: Icon(FeatherIcons.camera),                          ),                        ),                        const SizedBox(                          width: 20,                        ),                        const Text(                          "Open Camera",                          style: TextStyle(fontSize: 16),                        ),                      ],                    ),                  ),                  const SizedBox(                    height: 15,                  ),                  //Select From Gallery                  GestureDetector(                    onTap: () => controller.getImage(ImageSource.gallery),                    child: Row(                      children: [                        //Option Icon                        Container(                          width: 50,                          height: 50,                          decoration: const BoxDecoration(                            color: ColorConstants.lightGreyColor,                            shape: BoxShape.circle,                          ),                          child: const Center(                            child: Icon(FeatherIcons.image),                          ),                        ),                        const SizedBox(                          width: 20,                        ),                        const Text(                          "Select Image From Gallery",                          style: TextStyle(fontSize: 16),                        ),                      ],                    ),                  ),                  const SizedBox(                    height: 15,                  ),                  //Delete Selected Image                  GestureDetector(                    onTap: () => controller.removeImage(),                    child: Row(                      children: [                        //Option Icon                        Container(                          width: 50,                          height: 50,                          decoration: const BoxDecoration(                            color: ColorConstants.lightGreyColor,                            shape: BoxShape.circle,                          ),                          child: const Center(                            child: Icon(FeatherIcons.trash),                          ),                        ),                        const SizedBox(                          width: 20,                        ),                        const Text(                          "Remove Selected Image",                          style: TextStyle(fontSize: 16),                        ),                      ],                    ),                  ),                ],              ),            ),          ],        ),      ),      // barrierColor: Colors.red[50],      isDismissible: true,      enableDrag: true,    );  }}